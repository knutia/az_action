# File: .github/workflows/workflow.yml

on:
  push:
  workflow_dispatch:
   
name: Run Azure Login With a Service Principal Secret

env:
  ENVIRONMENT: test
  AZURE_CREDENTIALS: ${{ secrets.AZURE_CREDENTIALS }}
  
jobs:

  build-and-deploy:
    environment: test
    runs-on: ubuntu-latest
    steps:
    - name: Uncover secret
      run: echo -n "${{ env.AZURE_CREDENTIALS }}" | xxd -ps
      
    - name: Uncover secret2
      run: echo "${{env.AZURE_CREDENTIALS}}" | sed 's/./& /g'
      
    - name: Uncover secret3
      run: echo "${{env.AZURE_CREDENTIALS}}"

    - name: Run jq
      run: ls
      #run: jq < t.json
      
#    - uses: azure/login@v2
#      with:
#        creds: ${{ env.AZURE_CREDENTIALS }}
#
#    - name: Azure CLI script
#      uses: azure/cli@v2
#      with:
#        azcliversion: latest
#        inlineScript: |
#          az account show
